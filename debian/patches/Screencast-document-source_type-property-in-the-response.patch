From: Jan Grulich <jgrulich@redhat.com>
Date: Thu, 21 May 2020 13:56:21 +0200
Subject: Screencast: document source_type property in the response

Origin: upstream, 1.7.3, commit:aae1152533b4843ff0f8c0a7d8c8c2ae39a2a758
---
 data/org.freedesktop.impl.portal.ScreenCast.xml | 8 ++++++++
 data/org.freedesktop.portal.ScreenCast.xml      | 8 ++++++++
 src/screen-cast.c                               | 2 +-
 3 files changed, 17 insertions(+), 1 deletion(-)

diff --git a/data/org.freedesktop.impl.portal.ScreenCast.xml b/data/org.freedesktop.impl.portal.ScreenCast.xml
index 72c981c..78f2b1c 100644
--- a/data/org.freedesktop.impl.portal.ScreenCast.xml
+++ b/data/org.freedesktop.impl.portal.ScreenCast.xml
@@ -146,6 +146,14 @@
               stream.
             </para></listitem>
           </varlistentry>
+          <varlistentry>
+            <term>source_type u</term>
+            <listitem><para>
+              The type of the content which is being screen casted.
+              For available source types, see the AvailableSourceTypes property.
+              This property was added in version 3 of this interface.
+            </para></listitem>
+          </varlistentry>
         </variablelist>
     -->
     <method name="Start">
diff --git a/data/org.freedesktop.portal.ScreenCast.xml b/data/org.freedesktop.portal.ScreenCast.xml
index 3735a66..a2a158c 100644
--- a/data/org.freedesktop.portal.ScreenCast.xml
+++ b/data/org.freedesktop.portal.ScreenCast.xml
@@ -192,6 +192,14 @@
               stream.
             </para></listitem>
           </varlistentry>
+          <varlistentry>
+            <term>source_type u</term>
+            <listitem><para>
+              The type of the content which is being screen casted.
+              For available source types, see the AvailableSourceTypes property.
+              This property was added in version 3 of this interface.
+            </para></listitem>
+          </varlistentry>
         </variablelist>
     -->
     <method name="Start">
diff --git a/src/screen-cast.c b/src/screen-cast.c
index 1677050..1f036b6 100644
--- a/src/screen-cast.c
+++ b/src/screen-cast.c
@@ -947,7 +947,7 @@ on_supported_cursor_modes_changed (GObject *gobject,
 static void
 screen_cast_init (ScreenCast *screen_cast)
 {
-  xdp_screen_cast_set_version (XDP_SCREEN_CAST (screen_cast), 2);
+  xdp_screen_cast_set_version (XDP_SCREEN_CAST (screen_cast), 3);
 
   g_signal_connect (impl, "notify::supported-source-types",
                     G_CALLBACK (on_supported_source_types_changed),
